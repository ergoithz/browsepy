language: python

addon:
  apt:
    nodejs

matrix:
  include:
  - python: "2.7"
    env: eslint=no
  - python: "pypy"
    env: eslint=no
  # pypy3 commented out until Flask 0.11.2 is out
  #- python: "pypy3"
  #  env: PIP_PARAMS=""
  - python: "3.3"
    env: eslint=no
  - python: "3.4"
    env: eslint=no
  - python: "3.5"
    env: eslint=yes
    env: PATH=$PATH:node_modules/.bin

before_install:
  - alias node=nodejs

install:
  - pip install --upgrade pip
  - pip install travis-sphinx flake8 pep8 coveralls .
  - '[ "$eslint" = "yes" ] && npm install eslint'

script:
  - make travis-script
  - '[ "$eslint" = "yes" ] && make eslint'

after_success:
  - make travis-success

notifications:
  email: false

cache:
  directories:
    - $HOME/.cache/pip
